{% extends 'store/base.html' %}

{% block title %}{{ store.name }} - Store Details{% endblock %}

{% block content %}
    <!-- Store Header -->
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 10px; margin-bottom: 30px;">
        <div style="display: flex; justify-content: space-between; align-items: start;">
            <div>
                <h2 style="margin-bottom: 10px; font-size: 32px;"> {{ store.name }}</h2>
                <p style="margin-bottom: 5px; opacity: 0.9;">{{ store.description }}</p>
                <p style="font-size: 14px; opacity: 0.7;">Created: {{ store.created_at|date:"M d, Y" }}</p>
            </div>
            <div style="display: flex; gap: 10px;">
                <a href="{% url 'store:vendor_store_edit' pk=store.pk %}" 
                   class="btn" 
                   style="background: white; color: #667eea;">
                     Edit Store
                </a>
                <a href="{% url 'store:vendor_store_delete' pk=store.pk %}" 
                   class="btn btn-danger"
                   onclick="return confirm('Are you sure you want to delete this store?')">
                     Delete Store
                </a>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div style="margin-bottom: 30px; display: flex; gap: 10px;">
        <a href="{% url 'store:vendor_product_add' store_pk=store.pk %}" class="btn" style="background: #28a745;">
             Add Product to This Store
        </a>
        <a href="{% url 'store:vendor_stores_list' %}" class="btn" style="background: #6c757d;">
             Back to All Stores
        </a>
    </div>

    <!-- Products Section -->
    <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <h3 style="color: #667eea; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #667eea;">
             Products in {{ store.name }} ({{ products.count }})
        </h3>
        
        {% if products %}
            <div style="display: grid; gap: 20px;">
                {% for product in products %}
                    <div style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; background: #fafafa; transition: box-shadow 0.3s;">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div style="flex: 1;">
                                <h4 style="color: #333; margin-bottom: 10px; font-size: 20px;">{{ product.name }}</h4>
                                <p style="color: #666; margin-bottom: 15px;">{{ product.description|truncatewords:25 }}</p>
                                
                                <div style="display: flex; gap: 20px; margin-bottom: 15px;">
                                    <div>
                                        <span style="font-size: 12px; color: #999; display: block;">Price</span>
                                        <span style="font-size: 24px; font-weight: bold; color: #28a745;">R{{ product.price }}</span>
                                    </div>
                                    <div>
                                        <span style="font-size: 12px; color: #999; display: block;">Stock</span>
                                        <span style="font-size: 20px; font-weight: 600; {% if product.stock < 10 %}color: #dc3545;{% else %}color: #667eea;{% endif %}">
                                            {{ product.stock }} units
                                        </span>
                                    </div>
                                </div>
                                
                                <div style="font-size: 12px; color: #999;">
                                    Added: {{ product.created_at|date:"M d, Y" }}
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 10px; margin-top: 15px; padding-top: 15px; border-top: 1px solid #e0e0e0;">
                            <a href="{% url 'store:vendor_product_edit' pk=product.pk %}" 
                               class="btn" 
                               style="font-size: 14px; padding: 8px 16px; background: #ffc107; color: #333;">
                                 Edit
                            </a>
                            <a href="{% url 'store:vendor_product_delete' pk=product.pk %}" 
                               class="btn btn-danger" 
                               style="font-size: 14px; padding: 8px 16px;"
                               onclick="return confirm('Delete {{ product.name }}?')">
                                 Delete
                            </a>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div style="text-align: center; padding: 40px; background: #f9f9f9; border-radius: 8px; border: 2px dashed #ddd;">
                <p style="font-size: 18px; color: #666; margin-bottom: 20px;">
                    This store has no products yet.
                </p>
                <a href="{% url 'store:vendor_product_add' store_pk=store.pk %}" class="btn" style="background: #28a745;">
                     Add Your First Product
                </a>
            </div>
        {% endif %}
    </div>
{% endblock %}